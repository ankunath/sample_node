# Language setting
language: node_js


# Version number
node_js:
  - 0.12

env:
  global:
    - FOO=FUBU

build:
  pre_ci:
    - echo "Good morning 2"
    - echo "testing"

  ci:
    - ps -eax
    - ls -al

  post_ci:
    - echo "post ci stage. Finished ! yo"
    - docker build -t="scriptnull/sample_node:test.push.$BUILD_NUMBER" .
    - docker build -t="480971114143.dkr.ecr.us-east-1.amazonaws.com/sample_node:test.push.$BUILD_NUMBER" .
    - docker build -t="quay.io/shippablequay/sample_node_02:test.push.$BUILD_NUMBER" .
    - docker build -t="gcr.io/vidya-project/sample_node:test.push.$BUILD_NUMBER" .
    
  push:
    - echo "push will happen here"
    # - docker push scriptnull/sample_node:test.push.$BUILD_NUMBER
    # - docker push 480971114143.dkr.ecr.us-east-1.amazonaws.com/sample_node:test.push.$BUILD_NUMBER
    # - docker push quay.io/shippablequay/sample_node_02:test.push.$BUILD_NUMBER
    - docker push gcr.io/vidya-project/sample_node:test.push.$BUILD_NUMBER

integrations:
  hub:
    - integrationName: "my-docker"
      type: "docker"
      agent_only: true
      
    - integrationName: "my-ecr"
      type: "ecr"
      agent_only: true
      
    - integrationName: "my-quay"
      type: "quay.io"
      agent_only: true
      
    - integrationName: "my-gcr"
      type: "gcr"
      # agent_only: true
