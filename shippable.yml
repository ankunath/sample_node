# Language setting
language: node_js


# Version number
node_js:
  - 0.12

env:
  global:
    - FOO=FUBU
    - FO1=BUBU
    - BOO=GUBU

  matrix:
    - M1=ONE
    - M2=TWO

build:
  pre_ci:
    - echo "Good morning 2"
    - if [ "$BRANCH" == "master" ] || [ "$BRANCH" == "staging" ] || [ "$BRANCH" == "develop" ] ; then export IMAGE_TAG="1.0.0" ; else export IMAGE_TAG="dev" ; fi
    - if [ "$BRANCH" == "master" ] || [ "$BRANCH" == "staging" ] || [ "$BRANCH" == "develop" ] ; then export BUILD_TASK="build" ; else export BUILD_TASK="test" ; fi
    - echo $IMAGE_TAG
    - echo $BUILD_TASK

  pre_ci_boot:
    image_name: 0000000000000000.dkr.ecr.us-east-1.amazonaws.com/kl
    image_tag: $IMAGE_TAG
    pull: true
    options: "-e HOME=/root"
    #- echo $IMAGE_TAG

  ci:
    - npm install
